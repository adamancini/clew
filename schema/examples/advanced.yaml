# yaml-language-server: $schema=../clewfile.schema.json
---
# Advanced Clewfile with all features
version: 1

marketplaces:
  # Short form (owner/repo) - most common
  claude-plugins-official:
    repo: anthropics/claude-plugins-official

  # With optional ref (branch, tag, or SHA)
  superpowers-marketplace:
    repo: obra/superpowers-marketplace
    ref: main

  # HTTPS URL form
  devops-toolkit:
    repo: https://github.com/adamancini/devops-toolkit.git

plugins:
  # Simple form - enabled by default, scope inferred
  - context7@claude-plugins-official
  - superpowers@superpowers-marketplace
  - feature-dev@claude-plugins-official

  # Extended form - explicitly disabled
  - name: linear@claude-plugins-official
    enabled: false

  # Extended form - explicit scope
  - name: devops-toolkit@devops-toolkit
    enabled: true
    scope: user

  # Extended form - project scope
  - name: playwright@claude-plugins-official
    enabled: false
    scope: project

  # Local repository plugin (not from marketplace)
  # These are plugins cloned into ~/.claude/plugins/repos/
  # clew will directly edit installed_plugins.json instead of using claude CLI
  - name: my-local-plugin
    source: local
    path: ~/.claude/plugins/repos/my-local-plugin
    enabled: true
    scope: user

mcp_servers:
  # stdio transport with environment variables
  episodic-memory:
    transport: stdio
    command: npx
    args: ["-y", "@anthropic/episodic-memory-mcp"]
    env:
      EMBEDDING_MODEL: ${EMBEDDING_MODEL:-text-embedding-3-small}
      LOG_LEVEL: ${LOG_LEVEL:-info}
    scope: user

  # stdio transport with direct binary
  filesystem:
    transport: stdio
    command: /usr/local/bin/mcp-server-filesystem
    args: ["--root", "/Users/ada/projects"]
    scope: project

  # http transport (OAuth - will be skipped during sync)
  linear:
    transport: http
    url: https://mcp.linear.app/mcp

  # sse transport (legacy - prefer http for new configurations)
  legacy-events-server:
    transport: sse
    url: https://example.com/mcp/events
    scope: user
